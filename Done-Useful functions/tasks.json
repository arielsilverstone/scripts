{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Start Codebase Indexer (8AM-10PM)",
            "type": "shell",
            "command": "${command:python.interpreterPath}",
            "args": [
                "${workspaceFolder}/utils/codebase_indexer.py",
                "${workspaceFolder}",
                "-i", "600",
                "-o",
                "${workspaceFolder}/utils/codebase_index.json"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "Run Codebase Indexer Once",
            "type": "shell",
            "command": "${command:python.interpreterPath}",
            "args": [
                "${workspaceFolder}/utils/codebase_indexer.py",
                "${workspaceFolder}",
                "--once",
                "-o",
                "${workspaceFolder}/utils/codebase_index.json"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "Stop Codebase Indexer",
            "type": "shell",
            "command": "${command:python.interpreterPath}",
            "args": [
                "-c",
                "import os, signal, subprocess; [os.kill(int(pid), signal.SIGTERM) for pid in subprocess.check_output(['wmic', 'process', 'where', 'commandline like \"%codebase_indexer.py%\"', 'get', 'processid']).decode().split() if pid.isdigit()]"
            ],
            "windows": {
                "command": "wmic",
                "args": [
                    "process",
                    "where",
                    "commandline like '%codebase_indexer.py%'",
                    "delete"
                ]
            },
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        }
    ]
}
